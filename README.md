# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Структура кода придерживается MVP-архитектуры.

Базовый код.

Слой Model:

- Класс Api - предоставляет базовые методы для HTTP-запросов к серверу. Добавляет единую конфигурацию, обработку ошибок и методы get/post-запросов. Метод handleResponse - обрабатывает ответ сервера, проверяет и возвращает json запроса или ошибку.

- Класс EventEmitter - позволяет подписываться на события (on), отписываться (off) и уведомлении (emit) о наступлении события. Дополнительно реализованы методы  onAll и  offAll  — для подписки на все события и сброса всех подписчиков.

- Базовый абстрактный класс Component - представляет общую функциональность для компонентов представления. Реализует базовые операции с DOM-элементами, типизацию свойств компонента. В зависимости от метода, позволяет получить как аргумент HTML-элемент и изменить его, скрыть или отобразить.

 Основные методы: toggleClass - добавляет/удаляет класс элементу; setText - устанавливает текстовое содержимое элемента, преобразует значение в строку; setDisabled - включает/выключает элемент; setHidden/setVisible - скрывает/показывает элемент; setImage - устанавливает src и alt для изображения; render - метлд для обновления компонента.

- Класс AppData - отвечает за управление работой с товарами и корзиной, уведомление об изменениях через события.
 
 Структура:
 - Основные свойства: basket - массив товаров в корзине; cards - каталог товаров; order - данные заказа (оплата/адрес); contacts - крнтактные данные пользователя.
 - Основные методы: 
     - Работа с каталогом: addCards - добавляет товары в каталог; getCardById - находит товар по id; openCard - инициирует открытие карточки товара.
     - Работа с корзиной: addToBasket/removeFromBasket - добавляет товар в корзину/удаляет товар из корзины; clearBasket - очищает корзину (после покупки); getTotal - сумма заказа.

View:

- Класс CardItem - представляет собой шаблон карточки товара для отображения ее на странице и для взаимодействия с ней пользователя.

  Основная функциональность: 
  - Инициализация элементов (При создании карточки находятся DOM-элементы: - категория; - название; - изображение; - цена.).
  - Работа с данными (обновляются через сеттеры). id - устанавливает id карточки; cardTitle - заголовок товара; cardImage - изображение товара; cardCategory - категория товара; cardPrice - цена товара.
  - Обработка кликов (при клике на карточку товара генерируется событие: "this.events.emit('card:open', { id: this.cardId })").
  - Метод render создает карточку товара.

- Класс Page - класс для отображения всей страницы, включающая галерею товаров, счетчик товаров в корзине, а так же отвечает за блокировку прокрутки при открытом модальном окне.

 Структура:
  - Элементы страницы: _counter - счетчик товаров в корзине; _gallery - контейнер для карточек товаров; _wrapper - обертка страницы; _basket - кнопка корзины товаров.
  - Основные методы: counter - обновляет счетчик корзины; gallery - обновляет содержимое контейнера с карточками товаров; locked - блокирует/разблокирует прокрутку страницы.

- Класс CardInBasket - представляет отображение карточки товара в корзине покупок. Обеспечивает возможность удалить товар, а так же присваивает порядковый номер товару в корзине.

 Структура: 
 - Основные элементы: _index - поле для порядкового номера; _button - кнопка удаления товара.
 - Ключевые методы: index - установка порядкового номера; render - обновление данных карточки товара.

- Класс Form - универсальный компонент формы, обеспечивает управление состоянием формы, обработку введённых данных, валидацию и отображение ошибок, а так же отправку данных.

 Структура:
     - Основные элементы: _submit - кнопка отправки формы; _errors - контейнер для ошибок валидации.
     - Ключевые методы: onInputChange - обработчик изменений полей ввода; render - обновление состояния формы.
 - Сеттеры: valid - управление доступностью кнопки отправки; errors - текст ошибки.

- Класс Contact, наследуется от Form<IContacts> (позволяет использовать возможности: валидация формы; обработка сабмита; отображение ошибок; обработка изменений полей.) - реализует форму контактных данных(телефон и почта).

 Структура:
 - сеттеры: phone - установка значения телефона; email - установка значения email.

- Класс Order - реализует форму оформления заказа, обеспечивает выбор способа оплаты, ввода адреса доставки.Наследуется от Form<IOrder> (позволяет использовать возможности: валидация формы; обработка сабмита; отображение ошибок; обработка изменений полей.)

 Структура: 
 - Основные элементы: paymentCard/paymentCash - кнопка выбора полаты картой/наличная оплата; _address - поле ввода адреса доставки; button - кнопка отправки формы.
 - Методы: address - устанавливает адрес доставки.

- Класс Modal - отвечает за модальные окна. 

 Отвечает за:
 - Базовую функциональность модальных окон (открыть/закрыть);
 - Управление содержимым модального окна;
 - Генерацию событий при взаимодействии полььзователя с окном;
 - Интеграцию с системой событий приложения.

 Структура:
 - Основные элементы: _closeButton - кнопка закрытия; _content - контейнер для содержимого.
 - Ключевые методы: content - устанавливает содержимое модального окна; toggleModal - переключает состояние окна; open()/close() - открытие/закрытие модального окна (при открытии генерирует событие 'modal:open', при закрытии 'modal:close'(очищает содержимое при закрытии)).
